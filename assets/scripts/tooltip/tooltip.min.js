/*!
 * jQuery AxisThemes Tooltip Core v1.0
 * Core Functionalities for Axis Tooltip
 *
 * Copyright 2013, AxisThemes
 * Freely distributable under the MIT license.
 */
!function(a){"use strict";a.AxisTooltip=function(b){var c={delay:1500,delayOut:300,"class":"axis-tooltip",data:"axis-tooltip",scope:"body",attach:"element",event:"mouseenter",position:"top"};this.options=a.extend({},c,b),this.body=a("body"),this.scope=a(this.options.scope),this.tooltip=a('<div class="'+this.options["class"]+' tooltip-wrap"><span class="axis-arrow-wrap"><span class="axis-arrow"></span></span></div>'),this.inner=a('<div class="tooltip-inner"></div>').prependTo(this.tooltip),this.open=!1,this.timer=!1,this.active=!1,this.bind_events()},a.AxisTooltip.openTTs=[],a.AxisTooltip.prototype={bind_events:function(){this.scope.on(this.options.event+" mouseleave","[data-"+this.options.data+"]",a.proxy(this.start_timer,this)),"click"!==this.options.event?this.scope.on("mouseleave","[data-"+this.options.data+"]",a.proxy(this.hide_tooltip,this)):this.body.on("mousedown",a.proxy(this.hide_tooltip,this))},start_timer:function(b){if(clearTimeout(this.timer),b.type===this.options.event){var c="click"===this.options.event?0:this.open?0:this.options.delay;this.timer=setTimeout(a.proxy(this.show_tooltip,this,b),c)}else"mouseleave"===b.type&&(this.timer=setTimeout(a.proxy(this.stop_instant_open,this,b),this.options.delayOut));b.preventDefault()},reset_timer:function(){clearTimeout(this.timer),this.timer=!1},stop_instant_open:function(){this.open=!1},show_tooltip:function(b){var c="click"===this.options.event?b.target:b.currentTarget,d=a(c),e=d.data(this.options.data).trim(),f=d.data("axis-created-tooltip"),g="element"===this.options.attach?d:this.body,h="element"===this.options.attach?d.position():d.offset();if("undefined"!=typeof f?f=a.AxisTooltip.openTTs[f]:(this.inner.html(e),f="element"===this.options.attach?this.tooltip.clone().insertAfter(g):this.tooltip.clone().appendTo(g)),this.open=!0,this.active=f,!f.is(":animated:visible")||"click"!==b.type){var i="bottom"===this.options.position?h.top+d.outerHeight():h.top-f.outerHeight(),j=h.left+d.outerWidth()/2-f.outerWidth()/2;f.css({opacity:0,display:"block",top:i-10,left:j}).stop().animate({top:i,opacity:1},200),f.find("input[type=search]").focus(),a.AxisTooltip.openTTs.push(f),d.data("axis-created-tooltip",a.AxisTooltip.openTTs.length-1)}},hide_tooltip:function(b){var c,d,e=a(b.currentTarget);"click"===this.options.event&&(e=a(b.target)),e.is("."+this.options["class"])||0!==e.parents("."+this.options["class"]).length?(c=e.data("axis-created-tooltip"),c="undefined"!=typeof c?a.AxisTooltip.openTTs[c]:!1):this.active.length&&(c=this.active,this.active=!1),c&&(d=parseInt(c.css("top"),10)-10,c.animate({top:d,opacity:0},200,function(){c.css({display:"none"})}))}}}(jQuery);