!function(a){"use strict";a.AxisBuilderHistory=a.AxisBuilderHistory||{},a.AxisBuilderHistory=function(b){var c={steps:40,editor:"",monitor:"",buttons:"",event:"axisbuilder-storage-update"};return"undefined"==typeof Storage?!1:(this.options=a.extend({},c,b),void this.setups())},a.AxisBuilderHistory.prototype={setups:function(){this.editor=a(this.options.editor),this.canvas=a(this.options.monitor),this.wrapper=this.canvas.parent(),this.buttons=a(this.options.buttons),this.key=this.create_array_key(),this.storage=this.get()||[],this.maximum=this.storage.length-1,this.index=this.get(this.key+"index"),("undefined"==typeof this.index||null===this.index)&&(this.index=this.maximum),this.clear(),this.bindEvents()},create_array_key:function(){var a="axisbuilder"+axisbuilder_history.theme_name+axisbuilder_history.theme_version+axisbuilder_admin.post_id+axisbuilder_history.plugin_version;a=a.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()},bindEvents:function(){},get:function(a){var b=a||this.key;return JSON.parse(sessionStorage.getItem(b))},set:function(a,b){var c=a||this.key,d=b||JSON.stringify(this.storage);try{sessionStorage.setItem(c,d)}catch(e){new AB_Logger("Storage Limit reached. Your Browser does not offer enough session storage to save more steps for the undo/redo history.","Storage"),new AB_Logger(e,"Storage"),this.clear()}},clear:function(){sessionStorage.removeItem(this.key),sessionStorage.removeItem(this.index),this.index=null,this.storage=[]}}}(jQuery);